{% extends 'layout/index.html' %}

{% block style %}
<link rel="stylesheet" href="/static/styles/show_static_project.css" />
{% endblock %}

{% block title %}
<title> {{ project }} | CodeLand </title>
{% endblock %}

{% block body %}
{% if directory %}
{% for dirs in directory %}    
    <details>
        <summary open> {{ dirs.split('\\')[-1] }} </summary>
        <ol>
            {% for file in directory[dirs] %}
                <li id="file" data-location="{{dirs}}" data-filename="{{file}}">{{file}}</li>
            {% endfor %}
        </ol>
    </details>
    <script>
        const $detailsList = document.querySelectorAll('details')

        $detailsList.forEach(($details) => {
            $summary.querySelector('summary').addEventListener('click', expand)
        })
    
        function expand () {
            $detailsList.forEach(($details) => {
                $summary.removeAttribute('open')
            })
        }
    </script>
{% endfor %}
{% endif %}

<div class="download-code">
    {% if not session.get("username") %}
        <a class='btn btn-primary' href="/login"> Descargar código </a>
    {% else %}
        <a class='btn btn-primary' href="/download-static_project/{{id}}" download> Descargar código </a>
    {% endif %}
</div>

<div class="container code_container">
    <div class="header_code">
        <div class="circle bg-danger p-2"></div>
        <div class="circle bg-warning p-2"></div>
        <div class="circle bg-success p-2"></div>
    </div>
    <div id="show_code"></div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/scripts/show_ejemplo.js"></script>
{% endblock %}