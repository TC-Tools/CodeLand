{% extends "layout/index.html" %}
{% block title %}
<title>{{ user.username }} | CodeLand</title>
{% endblock %}


{% block body %}
<main class="container">
    <section class="my-5">
        <h2>Bienvenido {{ user.username}}</h2>
        <h3>Agrega un proyecto</h3>
        <a href="/add-project"  class="btn btn-primary">Submit code</a>
    </section>
    <section>
        <h1>{{ user.username }}</h1>
        <h3>Perfil edit</h3>
        <a href="/edit/{{user._id}}" class="btn btn-primary">Edit</a>
        <img src="data:image/{{user.contentType}};base64,{{user.perfil.decode('ascii')}}" alt="user profile" alt="">
    </section>
    <section>
        <h3>Project</h3>
        <div class='row' id="projects">
            {% if user['projects'] %}
            {% for project in user['projects'] %}
            <div class='col col-lg-4'>
                <div class='card' style='width: 18rem;'>
                    <img src="data:image/{{project.contentType}};base64,{{project.image.decode('ascii')}}" alt="{{project.title}}">
                    <div class='card-body'>
                        <h5 class='card-title'>{{project.title}}</h5>
                        <p class='card-text'>
                            {{project.description}}
                        </p>
                        <a href='/project/{{user.username}}/{{project.title}}' class='btn btn-primary'>Ver y editar</a>
                        <form id="delete-project">
                            <input type="hidden" name="id" value="{{project._id}}">
                            <button class='btn btn-danger'>Borrar proyecto</button>
                        </form>
                        <a class='btn btn-primary' href="/download-project/{{project._id}}" download>Descargar</a>
                    </div>
                </div>
            </div>
                {% endfor %}
        {% else %}
        <h4>No tienes proyectos :(</h4>
        <a href="/add-project">Agrega un proyecto a tu cuenta</a>
        {% endif %}
    </div>    
</section>
</main>
{% endblock %}

{% block scripts %}
<script src="/static/scripts/profile.js"></script>
{% endblock %}